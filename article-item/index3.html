<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visualizando la tipografía responsive</title>

    <!-- CSS GLOBAL -->
    <link rel="stylesheet" href="../css/global.css" />

    <style>
      @layer reset, base, type, layout;

      @layer type {
        html {
          --gap: round(up, 3vmin, 0.25lh);
          --tab-size: 2;
          --tab: calc(var(--tab-size, 2) * 1ch);
          line-height: 1.5;
          tab-size: var(--tab-size);

          --minor-second: calc(16 / 15);
          --major-second: calc(9 / 8);
          --minor-third: calc(6 / 5);
          --major-third: calc(5 / 4);
          --perfect-fourth: calc(4 / 3);
          --augmented-fourth: sqrt(2);
          --perfect-fifth: calc(3 / 2);
          --major-sixth: calc(5 / 3);
          --golden-ratio: calc((1 + sqrt(5)) / 2);
        }

        [type-container] {
          container: type / inline-size;
        }

        body,
        [type-set] {
          --medium: clamp(1rem, 17px + 0.24cqi, 1.25rem);
          font-size: var(--type-set-size, var(--medium));

          --xx-small: calc(var(--medium) * pow(var(--scale), -0.75));
          --x-small: calc(var(--medium) * pow(var(--scale), -0.5));
          --small: calc(var(--medium) * pow(var(--scale), -0.25));
          --large: calc(var(--medium) * pow(var(--scale), 1));
          --x-large: calc(var(--medium) * pow(var(--scale), 2));
          --xx-large: calc(var(--medium) * pow(var(--scale), 3));
          --xxx-large: calc(var(--medium) * pow(var(--scale), 4));

          --scale: var(--minor-third);

          @container (inline-size > 50em) {
            --scale: var(--perfect-fourth);
          }
        }

        body {
          @media (width > 50em) {
            --scale: var(--perfect-fourth);
          }
        }

        [type-set='small'] {
          --type-set-size: var(--small);
        }
        [type-set='large'] {
          --type-set-size: var(--large);
        }

        h1 {
          font-size: var(--xx-large);
        }
        h2 {
          font-size: var(--x-large);
        }
        h3 {
          font-size: var(--large);
        }
        h4 {
          font-size: var(--medium);
        }

        h1,
        h2,
        h3 {
          line-height: 1.25;
          margin-block: 0.25rlh;
        }

        p,
        li {
          text-wrap: pretty;
        }

        blockquote {
          border-inline-start: medium solid;
          font-size: var(--large);
          font-style: italic;
          padding-inline-start: var(--tab-size);
        }

        figcaption {
          font-size: var(--small);
          font-style: italic;
        }
      }

      @layer layout {
        body {
          display: grid;
          gap: var(--gap);
          padding-block: var(--gap);

          > :is(header, main, aside, footer) {
            container: layout / inline-size;
          }
        }

        main {
          display: grid;
          gap: 1lh 0;
          grid-template-columns:
            [full-start] var(--margin, var(--gap))
            [pull-start] minmax(0, 1.5fr)
            [content-start] minmax(auto, 35em)
            [content-end] minmax(0, 1fr)
            [pull-end] var(--margin, var(--gap))
            [full-end];

          @media (width > 45em) {
            --margin: 0;
            column-gap: var(--gap);
          }

          > * {
            margin: unset;
            grid-column: content;
          }
        }

        .by-line {
          font-size: var(--small);
          line-height: 1rlh;

          @container (width > 50em) {
            grid-column: pull-start / content-start;
            text-align: right;
          }

          p {
            margin: unset;
          }
        }

        main figure {
          grid-column: pull-start / content-end;
        }

        #articles {
          padding: var(--gap);
        }

        article-grid {
          display: grid;
          gap: var(--gap);
          grid-template-columns: repeat(auto-fit, minmax(14em, 1fr));
        }
      }

      @layer base {
        figure {
          margin-inline: unset;
        }
        blockquote {
          margin-inline: var(--tab);
        }
        p {
          margin-block: 0.5lh;
        }
        ol,
        ul {
          padding-inline-start: var(--tab);
        }
        dd {
          margin-inline-start: var(--tab);
        }
        hr {
          border: 0 dotted;
          border-block-end-width: thin;
          margin-block: 1.5lh;
        }

        :target {
          scroll-margin: 1lh;
        }
        :focus {
          outline-offset: 4px;
        }
        label {
          display: block;
        }
        textarea {
          field-sizing: content;
          inline-size: 100%;
          min-block-size: 4lh;
        }

        table {
          border-collapse: collapse;
          inline-size: 100%;
          font-variant-numeric: tabular-nums;
        }

        th,
        td {
          border: thin dotted;
          text-align: left;
          padding: 0.25lh 1ch;
          vertical-align: top;
        }

        [visually-hidden='skip-links']:focus-within {
          background: Canvas;
          border: thin solid grey;
          color: CanvasText;
          inset: 0 auto auto 0;
          list-style: none;
          margin: unset;
          padding: 1em;
          position: fixed;
        }
      }

      @layer reset {
        html {
          block-size: 100%;
          color-scheme: light dark;
          overflow-wrap: break-word;
          -webkit-text-size-adjust: none;
          text-size-adjust: none;
        }

        body {
          margin: unset;
        }

        pre {
          white-space: pre-wrap;
          white-space: preserve wrap;
        }

        picture {
          display: contents;
        }

        img,
        video,
        iframe {
          display: block;
          block-size: auto;
          max-inline-size: 100%;
        }

        input,
        button,
        textarea,
        select {
          font: inherit;
        }

        button,
        input:where([type='submit'], [type='reset'], [type='button']) {
          background: CanvasText;
          color: Canvas;
          border: thin solid grey;
        }

        [aria-expanded='true'],
        [aria-pressed='true'] {
          background: SelectedItem;
          border-color: CanvasText;
          color: SelectedItemText;
        }

        [hidden] {
          display: none !important;
        }

        visually-hidden,
        [visually-hidden]:not(:focus-within):not(:active) {
          clip-path: inset(50%) !important;
          height: 1px !important;
          overflow: hidden !important;
          position: absolute !important;
          white-space: nowrap !important;
          width: 1px !important;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Visualizando la tipografía responsive</h1>
      <footer class="by-line">
        <p>Una demo de <strong>Leonardo Bringas</strong></p>
        <time datetime="2025-08-26" pubdate>26 de agosto de 2025</time>
      </footer>

      <p>
        <em>¿Qué hacen todos los números en nuestro <code>clamp()</code>?</em>
      </p>

      <p>
        La interacción más simple entre <code>font-size</code> y el ancho del
        viewport sería una relación 1-a-1, manteniendo los valores iguales en
        todo momento. Podemos expresar eso en CSS como un
        <code>font-size</code> de <code>100vw</code>.
      </p>

      <pre><code>html { font-size: 100vw; }</code></pre>

      <p>
        Eso es muy directo y simple, pero una idea terrible. Cuando el ancho del
        viewport es <code>0px</code>, el <code>font-size</code> también es
        <code>0px</code>. Si el viewport crece a <code>3250px</code>, el
        <code>font-size</code> también será <code>3250px</code>. El viewport no
        puede ir por debajo de <code>0px</code>, pero (en teoría) no hay límite
        superior aquí.
      </p>

      <p>
        Herramientas como <a href="https://utopia.fyi">Utopia.fyi</a> te darán
        una salida más compleja con varias partes:
      </p>

      <pre><code>:root {
  --step-0: clamp(1.125rem, 1.0739rem + 0.2273vw, 1.25rem);
}</code></pre>

      <h2>Ajustando la tasa de cambio</h2>

      <p>
        Podríamos comenzar estableciendo una tasa de cambio más moderada,
        ajustando la pendiente (o tasa) de crecimiento. Para hacer eso,
        necesitamos ajustar el valor <code>vw</code>. Con
        <code>50vw</code> obtendríamos una fuente que escala a la mitad de la
        tasa del viewport, pero incluso eso parece demasiado dramático. La
        escala predeterminada de Utopia.fyi usa <code>0.2273vw</code> para el
        tamaño de fuente principal. ¡Eso es un cambio de <code>1px</code> en
        <code>font-size</code> por cada <code>440px</code> de redimensionamiento
        del viewport! Incluso la fuente más grande en esa escala usa menos de
        una tasa de respuesta de <code>2vw</code>. Redondeémoslo para nuestra
        demostración:
      </p>

      <pre><code>html { font-size: 0.25vw; }</code></pre>

      <p>
        Ahora estamos creciendo a una tasa más razonable, pero ahora nuestra
        fuente es demasiado pequeña. Todavía comienza en <code>0px</code> para
        un viewport de <code>0px</code>, y solo sería de <code>1px</code> de
        altura en una pantalla de <code>400px</code>. A esa tasa, no llegaremos
        a un tamaño de fuente estándar de <code>16px</code> hasta que el
        navegador alcance <code>6400px</code>, una pantalla muy ancha. Esta
        pendiente sutil solo tiene sentido si comenzamos con un desplazamiento.
        Podemos hacer eso sumando dos valores:
      </p>

      <pre><code>html { font-size: calc(17px + 0.25vw); }</code></pre>

      <p>
        Ese valor de desplazamiento mueve nuestra pendiente hacia arriba y hacia
        abajo sin impactar la pendiente que establecimos antes. Ahora un
        navegador de <code>400px</code> nos dará un <code>font-size</code> de
        <code>18px</code>, y un navegador de <code>1200px</code> resultará en
        <code>20px</code>. ¡Eso es mucho más apropiado!
      </p>

      <h2>Estableciendo límites</h2>

      <p>
        Pero todavía tenemos escalado infinito, y realmente no necesitamos eso.
        Podríamos mejorar nuestro algoritmo aún más proporcionando límites con
        una función <code>clamp()</code>:
      </p>

      <pre><code>html { font-size: clamp(18px, 17px + 0.25vw, 20px); }</code></pre>

      <p>
        Eso establece un rango fijo para nuestro cambio de
        <code>font-size</code>, que podemos pensar de dos maneras. En la
        superficie podemos ver el rango de <code>font-size</code> de
        <code>18px</code> a <code>20px</code>. Pero cuando combinamos eso con la
        pendiente y el desplazamiento, también tenemos un rango de tamaños de
        viewport donde la fuente está en transición entre esos dos tamaños. En
        este caso, la fuente comienza a crecer una vez que el viewport es mayor
        a <code>400px</code>, y deja de crecer cuando alcanzamos
        <code>1200px</code>.
      </p>

      <p>
        Como herramienta, Utopia comienza desde estas cuatro entradas:
        <code>font-size</code> mínimo, viewport mínimo, <code>font-size</code>
        máximo, y viewport máximo, y trabaja hacia atrás para determinar el
        desplazamiento y la pendiente adecuados.
      </p>

      <h2>Consideraciones de accesibilidad</h2>

      <p>
        Creo que este es un patrón útil. Me gustan las fuentes un poco más
        pequeñas en espacios ajustados, y fuentes más grandes cuando hay más
        espacio. Pero eso viene con advertencias, y es importante que los
        usuarios tengan la última palabra con la capacidad de hacer zoom. Si no
        tenemos cuidado, las unidades de viewport y las funciones clamp pueden
        hacer que las fuentes no puedan hacer zoom.
      </p>

      <blockquote>
        Si el tamaño de fuente máximo es menor o igual a 2.5 veces el tamaño de
        fuente mínimo, entonces el texto siempre pasará WCAG SC 1.4.4, al menos
        en todos los navegadores modernos.
        <footer>—Maxwell Barvian</footer>
      </blockquote>

      <p>
        Utopia proporciona útilmente una advertencia cuando creamos escalas que
        son inaccesibles. Tal vez pueda agregar eso a mi demostración también.
        Mientras tanto, juega con ese control deslizante de 'zoom de página'
        para probar diferentes valores y ver cómo interactúan.
      </p>

      <hr />
    </main>

    <aside id="articles">
      <h2>Más artículos de Leonardo Bringas</h2>

      <article-grid>
        <grid-item type-container>
          <article type-set>
            <h3>
              <a href="../index.html"
                >Los cambios del viewport no siempre significan lo mismo</a
              >
            </h3>
            <time>16 de diciembre de 2025</time>
          </article>
        </grid-item>

        <grid-item type-container>
          <article type-set>
            <h3>
              <a href="article-item/index3.html"
                >Visualizando la tipografía responsive</a
              >
            </h3>
            <time>26 de agosto de 2025</time>
          </article>
        </grid-item>

        <grid-item type-container>
          <article type-set>
            <h3>
              <a href="article-item/index4.html"
                >Diseñando para el tamaño de fuente y el zoom del usuario</a
              >
            </h3>
            <time>22 de julio de 2025</time>
          </article>
        </grid-item>
      </article-grid>
    </aside>
  </body>
</html>
